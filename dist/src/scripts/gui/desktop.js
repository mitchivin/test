const _0xff30e4=_0xcd52;(function(_0x4696d4,_0x42ad2d){const _0xca0509=_0xcd52,_0x5ef18b=_0x4696d4();while(!![]){try{const _0x5972a2=-parseInt(_0xca0509(0x15c))/0x1+parseInt(_0xca0509(0x17e))/0x2+parseInt(_0xca0509(0x150))/0x3*(parseInt(_0xca0509(0x147))/0x4)+parseInt(_0xca0509(0x167))/0x5*(parseInt(_0xca0509(0x178))/0x6)+-parseInt(_0xca0509(0x16a))/0x7*(-parseInt(_0xca0509(0x184))/0x8)+parseInt(_0xca0509(0x151))/0x9+-parseInt(_0xca0509(0x179))/0xa;if(_0x5972a2===_0x42ad2d)break;else _0x5ef18b['push'](_0x5ef18b['shift']());}catch(_0x173b42){_0x5ef18b['push'](_0x5ef18b['shift']());}}}(_0x339b,0xa3317));import{EVENTS}from'../utils/eventBus.js';import{isMobileDevice}from'../utils/device.js';function _0xcd52(_0x2b0e22,_0x59fd86){const _0x339be6=_0x339b();return _0xcd52=function(_0xcd528e,_0x2eba75){_0xcd528e=_0xcd528e-0x145;let _0x2f38fe=_0x339be6[_0xcd528e];if(_0xcd52['MyrWcz']===undefined){var _0x31c297=function(_0x127f1b){const _0x535b79='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x287dd5='',_0x345659='';for(let _0x326d80=0x0,_0x51a66e,_0x173496,_0x50b4e5=0x0;_0x173496=_0x127f1b['charAt'](_0x50b4e5++);~_0x173496&&(_0x51a66e=_0x326d80%0x4?_0x51a66e*0x40+_0x173496:_0x173496,_0x326d80++%0x4)?_0x287dd5+=String['fromCharCode'](0xff&_0x51a66e>>(-0x2*_0x326d80&0x6)):0x0){_0x173496=_0x535b79['indexOf'](_0x173496);}for(let _0x5da090=0x0,_0x19d60d=_0x287dd5['length'];_0x5da090<_0x19d60d;_0x5da090++){_0x345659+='%'+('00'+_0x287dd5['charCodeAt'](_0x5da090)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x345659);};_0xcd52['PTmKYk']=_0x31c297,_0x2b0e22=arguments,_0xcd52['MyrWcz']=!![];}const _0x17f6f0=_0x339be6[0x0],_0x411329=_0xcd528e+_0x17f6f0,_0xaf7a6e=_0x2b0e22[_0x411329];return!_0xaf7a6e?(_0x2f38fe=_0xcd52['PTmKYk'](_0x2f38fe),_0x2b0e22[_0x411329]=_0x2f38fe):_0x2f38fe=_0xaf7a6e,_0x2f38fe;},_0xcd52(_0x2b0e22,_0x59fd86);}let SOCIALS_CACHE=null;function _0x339b(){const _0x1bddff=['D2fSBhbHCgvYtw9IAwXL','CMLNAhq','zM9YrwfJAa','y2XPy2S','nZe0odKYogzIwvv1CG','Cg9PBNrLCM1VDMu','A2v5','y2XLyw51CefYDgLMywn0CW','CMvWBgfJzq','y2XHC3nmAxn0','Dgv4DenVBNrLBNq','C3rHCNry','C2vSzwn0zwq','zgvZA3rVCa','z2v0qxr0CMLIDxrL','C2vSzwn0zwrjy29UCW','y29UDgfPBNm','C3rVCfbYB3bHz2f0Aw9U','y2XLyxjuzw1WB3jHCNLiAwDOBgLNAhrZ','Dg91y2HLBMq','C3rHCNrz','Bwf4vg91y2HqB2LUDhm','ywn0AxzLrhjHz1bVAw50zxjjza','CxvLCNLtzwXLy3rVCG','BgfZDenSAwnRvgLTzxm','CgfYzw50tM9Kzq','BgvMDa','C2vSzwn0Aw9Ulw92zxjSyxK','AxneCMfNz2LUzW','lMrLC2T0B3a','ywrK','odu3odG4zxzVDvnZ','DgfNtMfTzq','y2XPzw50wa','z2v0swnVBNm','CMvTB3zLq2HPBgq','v0Lore9xx0zpq1vtruq','u1rbuLrnru5vx09qru5fra','ChvIBgLZAa','Dg9W','oxr5EwrZCW','mtq2otu5mKv1B0jztq','C3vIC2nYAwjL','DhLWzq','v0Lore9xx0nsrufuruq','AgLNAgXPz2H0swnVBNnjBNrLCNnLy3rPBMC','yMfJA2DYB3vUzeLTywDL','zgL2','C2v0Dxbjy29UrxzLBNrZ','D2fSBhbHCgvYrgvZA3rVCa','CMvTB3zL','DhjPBq','ntaZnJC1tMzZu0HI','B3zLCMXHEq','Cg9PBNrLCKLK','ywjZ','D2fSBhbHCgvYlw1VyMLSzq','Ag92zxiTyNKTC2vSzwn0Aw9U','y2XHC3noyw1L','DxjSkcC','i3nLBgvJDgLVBI1IB3GSic5ZzwXLy3rPB24TyM94','B250B3vJAhn0yxj0','zxzLBNrcDxm','mJbUCwnREKe','Dg9mB3DLCKnHC2u','C29JAwfSCW','n2fVqu5rsG','ANnVBG','AgfZrhjHz2DLza','DgfYz2v0','y2XPzw50wq','lI9PBMzVlMPZB24','C3r5Bgu','rMfPBgvKihrVigzLDgnOig9YihbHCNnLihnVy2LHBhmGzNjVBsbPBMzVlMPZB246','z2v0qM91BMrPBMDdBgLLBNrszwn0','mhb4','AwnVBG','ufjpr1jbtv9puevo','ywX0','DxbKyxrLu29JAwfSrgvZA3rVCeLJB25Z','nZm4nJb3vMLysvi','odmZntGXmePIBe1Xvq','C2vSzwn0Aw9UqM94','y2XLyxjtzwXLy3rPB24','ywrKrxzLBNrmAxn0zw5LCG','CMvZzxreCMfNu2vSzwn0Aw9Uu3rHDgu','nteYmJCWy0z3Be1Y','C2v0DxbqB2LUDgvYu2vSzwn0Aw9UrxzLBNrZ'];_0x339b=function(){return _0x1bddff;};return _0x339b();}async function getSocials(){const _0x6d6e73=_0xcd52;if(SOCIALS_CACHE)return SOCIALS_CACHE;try{const _0x127f1b=await fetch(_0x6d6e73(0x16f)),_0x535b79=await _0x127f1b['json']();return SOCIALS_CACHE=Array['isArray'](_0x535b79[_0x6d6e73(0x169)])?_0x535b79[_0x6d6e73(0x169)]:[],SOCIALS_CACHE;}catch(_0x287dd5){return console['error'](_0x6d6e73(0x171),_0x287dd5),SOCIALS_CACHE=[],SOCIALS_CACHE;}}let SYSTEM_ASSETS=null;async function getSystemAssets(){const _0x2ba9f9=_0xcd52;if(SYSTEM_ASSETS)return SYSTEM_ASSETS;try{const _0x345659=await fetch('./system.json');return SYSTEM_ASSETS=await _0x345659[_0x2ba9f9(0x16b)](),SYSTEM_ASSETS;}catch(_0x326d80){return console['error']('Failed\x20to\x20fetch\x20system.json:',_0x326d80),SYSTEM_ASSETS={},SYSTEM_ASSETS;}}export default class Desktop{constructor(_0x51a66e){const _0xc14133=_0xcd52;this['eventBus']=_0x51a66e,this['desktop']=document[_0xc14133(0x197)](_0xc14133(0x145)),this[_0xc14133(0x17a)]=null,this['isDragging']=!0x1,this['hasDragged']=!0x1,this['startX']=0x0,this[_0xc14133(0x194)]=0x0,this['lastClickTimes']={},this[_0xc14133(0x18f)]=new Set(),this['activeDragPointerId']=null,this[_0xc14133(0x187)](),this['createSelectionOverlay'](),getSocials()['then'](_0x173496=>{const _0x2e269c=_0xc14133;this[_0x2e269c(0x169)]=_0x173496,this['updateSocialDesktopIcons'](),this['setupIconEvents']();}),this['setupDesktopEvents'](),this[_0xc14133(0x17f)](),this['desktop'][_0xc14133(0x189)][_0xc14133(0x15a)]('wallpaper-default','wallpaper-mobile'),isMobileDevice()?this[_0xc14133(0x18d)][_0xc14133(0x189)]['add'](_0xc14133(0x160)):this['desktop'][_0xc14133(0x189)]['add']('wallpaper-default'),this['eventBus']['subscribe'](EVENTS[_0xc14133(0x154)],()=>this['clearSelection']()),this[_0xc14133(0x166)][_0xc14133(0x152)](EVENTS[_0xc14133(0x14c)],()=>this[_0xc14133(0x17b)]()),this[_0xc14133(0x166)][_0xc14133(0x152)](EVENTS['PROGRAM_OPEN'],()=>this[_0xc14133(0x17d)]()),this[_0xc14133(0x166)]['subscribe'](EVENTS[_0xc14133(0x14d)],()=>this['resetDragSelectionState']()),getSystemAssets()['then'](_0x50b4e5=>{const _0x474c78=_0xc14133;isMobileDevice()&&_0x50b4e5[_0x474c78(0x180)]?this['desktop']['style'][_0x474c78(0x156)]=_0x474c78(0x163)+_0x50b4e5['wallpaperMobile']+'\x27)':_0x50b4e5['wallpaperDesktop']&&(this['desktop'][_0x474c78(0x170)][_0x474c78(0x156)]=_0x474c78(0x163)+_0x50b4e5[_0x474c78(0x159)]+'\x27)');});}[_0xff30e4(0x14a)](){return this['desktop']['querySelectorAll']('.desktop-icon');}[_0xff30e4(0x187)](){const _0x203df7=_0xff30e4;document['querySelectorAll'](_0x203df7(0x164))[_0x203df7(0x182)](_0x5da090=>_0x5da090[_0x203df7(0x15a)]());}['createSelectionOverlay'](){const _0x3e6e62=_0xff30e4;this[_0x3e6e62(0x15d)]||(this['overlay']=document['createElement'](_0x3e6e62(0x157)),this['overlay']['className']=_0x3e6e62(0x19b),this[_0x3e6e62(0x18d)]['prepend'](this['overlay']));}[_0xff30e4(0x177)](){const _0x496ff2=_0xff30e4;this[_0x496ff2(0x169)]&&this['socials'][_0x496ff2(0x182)](_0x19d60d=>{const _0x58e8bc=_0x496ff2,_0x4cdf0d=this['desktop'][_0x58e8bc(0x197)]('.desktop-icon[data-program-name=\x22'+_0x19d60d[_0x58e8bc(0x186)]+'\x22]\x20img');if(_0x4cdf0d&&_0x19d60d[_0x58e8bc(0x174)]){const _0x39cc43='./'+_0x19d60d[_0x58e8bc(0x174)][_0x58e8bc(0x188)](/^\.\//,'')['replace'](/^\//,'');_0x4cdf0d['src']=_0x39cc43,_0x4cdf0d[_0x58e8bc(0x176)]=_0x19d60d['name'];}});}[_0xff30e4(0x158)](){const _0x423738=_0xff30e4,_0x2caae8=_0x423738(0x165)in window||navigator[_0x423738(0x195)]>0x0,_0x2516ad=(this['socials']||[])['reduce']((_0x2998bd,_0x391553)=>(_0x2998bd[_0x391553[_0x423738(0x186)]]=_0x391553,_0x2998bd),{});this['getIcons']()['forEach'](_0x35aea9=>{const _0x71150f=_0x423738;if('A'===_0x35aea9[_0x71150f(0x148)])return;const _0x1dfce2=_0x35aea9[_0x71150f(0x197)]('span'),_0x15c222=_0x1dfce2?_0x1dfce2[_0x71150f(0x18a)][_0x71150f(0x15b)]()[_0x71150f(0x168)]()[_0x71150f(0x188)](/\s+/g,'-'):'',_0x3faac3=_0x19e9a1=>{const _0x7a8049=_0x71150f;if(_0x19e9a1[_0x7a8049(0x191)](),_0x2caae8&&'click'===_0x19e9a1[_0x7a8049(0x153)])return;const _0x460053=Date['now']();if(_0x460053-(this['lastClickTimes'][_0x15c222]||0x0)<0x190){_0x35aea9['classList']['contains'](_0x7a8049(0x18c))||this['selectIcon'](_0x35aea9,!0x0);let _0x4e484c=_0x35aea9[_0x7a8049(0x18e)]('data-program-name');_0x2516ad[_0x4e484c]?window['open'](_0x2516ad[_0x4e484c]['url'],'_blank'):this['eventBus'][_0x7a8049(0x14e)](EVENTS[_0x7a8049(0x175)],{'programName':_0x4e484c}),this['lastClickTimes'][_0x15c222]=0x0;}else this['toggleIconSelection'](_0x35aea9,_0x19e9a1['ctrlKey']),this[_0x7a8049(0x198)][_0x15c222]=_0x460053;};_0x2caae8?_0x35aea9[_0x71150f(0x17c)](_0x71150f(0x193),_0x3faac3):_0x35aea9['addEventListener']('click',_0x3faac3);});}['setupDesktopEvents'](){const _0x598b1c=_0xff30e4;this['desktop']['addEventListener'](_0x598b1c(0x183),_0x1fb7ce=>{const _0x499d59=_0x598b1c;_0x1fb7ce['target']!==this['desktop']&&_0x1fb7ce['target']!==this[_0x499d59(0x15d)]||this['isDragging']||this['hasDragged']||this['clearSelection']();});}[_0xff30e4(0x17f)](){const _0xb43c15=_0xff30e4;window['addEventListener']('pointerdown',_0x14e9b7=>{const _0x33b796=_0xcd52;if(_0x14e9b7[_0x33b796(0x16d)]!==this[_0x33b796(0x15d)]&&_0x14e9b7[_0x33b796(0x16d)]!==this['desktop'])return;if(isMobileDevice()&&(null!==this[_0x33b796(0x196)]&&this[_0x33b796(0x196)]!==_0x14e9b7['pointerId']||this[_0x33b796(0x19c)]&&this[_0x33b796(0x196)]===_0x14e9b7[_0x33b796(0x15e)])&&this[_0x33b796(0x17d)](),this[_0x33b796(0x19c)])return;_0x14e9b7['ctrlKey']||this['clearSelection']();const _0x5f27c5=this[_0x33b796(0x18d)][_0x33b796(0x172)]();this[_0x33b796(0x18b)]=_0x14e9b7[_0x33b796(0x149)]-_0x5f27c5[_0x33b796(0x19a)],this[_0x33b796(0x194)]=_0x14e9b7[_0x33b796(0x16e)]-_0x5f27c5[_0x33b796(0x14f)],this[_0x33b796(0x192)](),this[_0x33b796(0x17a)]=document['createElement']('div'),this[_0x33b796(0x17a)][_0x33b796(0x162)]='selection-box',Object['assign'](this[_0x33b796(0x17a)]['style'],{'left':this[_0x33b796(0x18b)]+'px','top':this['startY']+'px','width':_0x33b796(0x173),'height':_0x33b796(0x173)}),this[_0x33b796(0x18d)]['appendChild'](this[_0x33b796(0x17a)]),this[_0x33b796(0x19c)]=!0x0,this['hasDragged']=!0x1,this['activeDragPointerId']=_0x14e9b7['pointerId'];}),window[_0xb43c15(0x17c)](_0xb43c15(0x185),_0x62132e=>{const _0x1748f4=_0xb43c15;if(!this['isDragging']||!this['selectionBox'])return;if(isMobileDevice()&&_0x62132e[_0x1748f4(0x15e)]!==this['activeDragPointerId'])return;this[_0x1748f4(0x16c)]=!0x0;const _0x66ed48=this['desktop'][_0x1748f4(0x172)](),_0x1fa09b=_0x62132e[_0x1748f4(0x149)]-_0x66ed48[_0x1748f4(0x19a)],_0x563d40=_0x62132e[_0x1748f4(0x16e)]-_0x66ed48['top'],_0x47dcbe=Math['min'](_0x1fa09b,this[_0x1748f4(0x18b)]),_0x2a1b6c=Math['min'](_0x563d40,this['startY']),_0x39eb21=Math['abs'](_0x1fa09b-this['startX']),_0xc5c1b1=Math[_0x1748f4(0x15f)](_0x563d40-this['startY']);Object['assign'](this[_0x1748f4(0x17a)]['style'],{'left':_0x47dcbe+'px','top':_0x2a1b6c+'px','width':_0x39eb21+'px','height':_0xc5c1b1+'px'}),this[_0x1748f4(0x155)](_0x47dcbe,_0x2a1b6c,_0x39eb21,_0xc5c1b1);}),window['addEventListener']('pointerup',_0x1c213d=>{const _0x380b66=_0xb43c15;this[_0x380b66(0x19c)]&&this['selectionBox']&&(isMobileDevice()&&_0x1c213d[_0x380b66(0x15e)]!==this['activeDragPointerId']||(this['isDragging']=!0x1,this[_0x380b66(0x14a)]()[_0x380b66(0x182)](_0x3e49a5=>{const _0x2830e5=_0x380b66;_0x3e49a5['classList']['contains']('hover-by-selection')&&(_0x3e49a5[_0x2830e5(0x189)][_0x2830e5(0x15a)](_0x2830e5(0x161)),_0x3e49a5[_0x2830e5(0x189)][_0x2830e5(0x146)](_0x2830e5(0x18c)),this[_0x2830e5(0x18f)]['add'](_0x3e49a5));}),this['selectionBox']?.['parentNode']&&(this[_0x380b66(0x17a)][_0x380b66(0x199)][_0x380b66(0x14b)](this['selectionBox']),this[_0x380b66(0x17a)]=null),this['activeDragPointerId']=null));});}[_0xff30e4(0x155)](_0xdd30ba,_0x524868,_0x334fb4,_0x40d6d6){const _0x2fa721=_0xff30e4,_0x4951b6=_0xdd30ba,_0x57d5c3=_0x524868,_0xadb3f0=_0xdd30ba+_0x334fb4,_0x31a2a7=_0x524868+_0x40d6d6;this['getIcons']()[_0x2fa721(0x182)](_0x2da407=>{const _0x3ff912=_0x2fa721,_0x3dab9a=_0x2da407['getBoundingClientRect'](),_0x332dde=this['desktop']['getBoundingClientRect'](),_0x284b19=_0x3dab9a['left']-_0x332dde['left'],_0x3ae613=_0x3dab9a['top']-_0x332dde['top'],_0x56648c=_0x3dab9a[_0x3ff912(0x181)]-_0x332dde[_0x3ff912(0x19a)],_0x31d6b2=_0x3dab9a['bottom']-_0x332dde[_0x3ff912(0x14f)];!(_0x56648c<_0x4951b6||_0x284b19>_0xadb3f0||_0x31d6b2<_0x57d5c3||_0x3ae613>_0x31a2a7)?_0x2da407['classList'][_0x3ff912(0x146)](_0x3ff912(0x161)):_0x2da407[_0x3ff912(0x189)]['remove']('hover-by-selection');});}['toggleIconSelection'](_0x4d41a3,_0x5f4f34){const _0x344c31=_0xff30e4;_0x5f4f34?_0x4d41a3[_0x344c31(0x189)][_0x344c31(0x190)](_0x344c31(0x18c))?(_0x4d41a3[_0x344c31(0x189)][_0x344c31(0x15a)](_0x344c31(0x18c)),this['selectedIcons']['delete'](_0x4d41a3)):(_0x4d41a3[_0x344c31(0x189)]['add'](_0x344c31(0x18c)),this['selectedIcons']['add'](_0x4d41a3)):(this['clearSelection'](),_0x4d41a3[_0x344c31(0x189)]['add'](_0x344c31(0x18c)),this[_0x344c31(0x18f)]['add'](_0x4d41a3));}['selectIcon'](_0x7c6e17,_0x1cb604=!0x0){const _0x4a944e=_0xff30e4;_0x1cb604&&this['clearSelection'](),_0x7c6e17[_0x4a944e(0x189)]['add'](_0x4a944e(0x18c)),this[_0x4a944e(0x18f)][_0x4a944e(0x146)](_0x7c6e17);}[_0xff30e4(0x17b)](){const _0x2bb34b=_0xff30e4;this['getIcons']()[_0x2bb34b(0x182)](_0x2c7517=>{const _0x3552df=_0x2bb34b;_0x2c7517[_0x3552df(0x189)]['remove'](_0x3552df(0x18c),'hover-by-selection');}),this[_0x2bb34b(0x18f)]['clear']();}[_0xff30e4(0x192)](){const _0x10a381=_0xff30e4;this['getIcons']()['forEach'](_0x449251=>_0x449251[_0x10a381(0x189)]['remove'](_0x10a381(0x161)));}['resetDragSelectionState'](){const _0x2e5978=_0xff30e4;this['isDragging']=!0x1,this[_0x2e5978(0x16c)]=!0x1,this[_0x2e5978(0x196)]=null,this[_0x2e5978(0x17a)]&&this['selectionBox'][_0x2e5978(0x199)]&&(this[_0x2e5978(0x17a)]['parentNode']['removeChild'](this[_0x2e5978(0x17a)]),this[_0x2e5978(0x17a)]=null),this['clearTemporaryHighlights']();}}