const _0x42c143=_0x225a;(function(_0x4cc6f3,_0x54423b){const _0x28fdc5=_0x225a,_0xabbdf3=_0x4cc6f3();while(!![]){try{const _0x321984=parseInt(_0x28fdc5(0x107))/0x1+parseInt(_0x28fdc5(0x10d))/0x2*(-parseInt(_0x28fdc5(0xf1))/0x3)+-parseInt(_0x28fdc5(0x106))/0x4*(parseInt(_0x28fdc5(0xeb))/0x5)+parseInt(_0x28fdc5(0xf9))/0x6+-parseInt(_0x28fdc5(0x115))/0x7*(parseInt(_0x28fdc5(0xf6))/0x8)+-parseInt(_0x28fdc5(0x111))/0x9*(parseInt(_0x28fdc5(0x119))/0xa)+parseInt(_0x28fdc5(0x100))/0xb;if(_0x321984===_0x54423b)break;else _0xabbdf3['push'](_0xabbdf3['shift']());}catch(_0x1066f8){_0xabbdf3['push'](_0xabbdf3['shift']());}}}(_0xd757,0x32731));import _0x251a98 from'./startMenu.js';import{EVENTS}from'../utils/eventBus.js';import{setupTooltips}from'./tooltip.js';import{isMobileDevice}from'../utils/device.js';import{balloonSound}from'./boot.js';function _0xd757(){const _0x2d119c=['rxjYB3iGzMv0y2HPBMCGC3LZDgvTlMPZB24GzM9YigjHBgXVB246','lNrYyxKTBMv0D29YAY1Py29U','ywjVDxq','ywrKrxzLBNrmAxn0zw5LCG','lM11C2LJlxbSyxLPBMCTAw5KAwnHDg9Y','C2nYB2XSwa','lMjHBgXVB25Fx2nSB3nL','CMvKDwnLza','CxvLCNLtzwXLy3rVCKfSBa','DgL0Bgu','y2XPy2S','BgvMDa','B25JBgLJAW','zxjYB3i','C3rVCfbYB3bHz2f0Aw9U','BgvUz3rO','rgf0zvrPBwvgB3jTyxq','re9nq29UDgvUDeXVywrLza','lNrHC2TIyxiTAxrLBvTKyxrHlxbYB2DYyw0TAwq9iM11C2LJugXHEwvYlxDPBMrVDYjD','C3jJ','C2v0DxbtDgfYDej1DhrVBKvMzMvJDhm','B2jZzxj2zq','ywrK','CxvLCNLtzwXLy3rVCG','D2vIA2L0uMvXDwvZDez1BgXZy3jLzw4','lNrHC2TIyxiTAxrLBq','rxjYB3iGCgXHEwLUzYbIywXSB29UihnVDw5KoG','phnWyw4Gy2XHC3m9iM11C2LJlxbSyxLPBMCTAw5KAwnHDg9YiIbZDhLSzt0Iy29SB3i6ihDOAxrLoYbTyxjNAw4TBgvMDdOGnhb4oYi+8j+uIJWVC3bHBJ4','yM9KEq','v0Lore9xx0nsrufuruq','DgfZA2jHCLnOyxjLzev2zw50qNvZig9Yievwru5uuYbUB3qGyxzHAwXHyMXLigzVCIbIywXSB29UigXPBMSU','x2fWCgX5vgfZA2jHCKXHEw91Da','lMjHBgXVB24','EKLUzgv4','ChvIBgLZAa','Dg9W','mJvOExPxtwG','zgLZCgXHEq','C3r5Bgu','zM9YBwf0','Bxnszxf1zxn0rNvSBhnJCMvLBG','Dg9Nz2XL','mJGWnZu4u0fdvvb5','AgLKzq','lNrYyxKTzNvSBhnJCMvLBI1Py29U','ChjVz3jHBxndB250ywLUzxi','D2LKDgG','mJC2oeT5BvrPrW','tvvtsunFueXbwuvsx1bmqvLjtKC','lNn5C3rLBs10CMf5','mteXmZu4ohPlA3vgDa','BxvZAwnqBgf5zxi','x3nLDfn0yxj0qNv0Dg9Usw1Hz2u','x2nHBgn1Bgf0zuf2ywLSywjSzvDPzhrO','B3zLCMzSB3C','zM9YrwfJAa','Aw1N','otKWmtCXnMHRwNLdyq','y3vYCMvUDfrPBwu','ufjpr1jbtv9puevo','mI1KAwDPDa','x2rLDgvYBwLUzuXHEw91De1Vzgu','Bw96uMvXDwvZDez1BgXty3jLzw4','nZy1nNDbyuHZqG','mtyZnZn5DxLbB1O','B3bHy2L0Eq','y2XHC3nmAxn0','yMfSBg9VBG','AwnVBI1VBMX5','zMXVB3i','ngjsyuLiwG','tvvtsunFueXbwuvsx1nut1bqruq','C3rHCNrnzw51q29TCg9Uzw50','C2nYB2XSwq','mtHrzwzwvfO','lNrPBwu','DxbKyxrLq2XVy2S','z2v0rwXLBwvUDej5swq','nZyWouXTu1PAta','CMvXDwvZDez1BgXZy3jLzw4','B2zMC2v0v2LKDgG','zNvSBhnJCMvLBMnOyw5Nzq','mtyXmZiXmhvUD1nrsq','C3vIC2nYAwjLvg9fDMvUDhm','u1rbuLrnru5vx09qru5fra','yMfSBg9VBI1YB290','lNrHC2TIyxiTChjVz3jHBxm','i2jHBgXVB24TChjVAMvJDhmTBgLUAW','zxzLBNrcDxm','C3rHCNrcDxr0B24','DxbKyxrLvgfZA2jHCKXHEw91Da','C3vIC2nYAwjL','CgfYzw50tM9Kzq'];_0xd757=function(){return _0x2d119c;};return _0xd757();}let taskbarSharedEventBus=null;class Clock{#e;#t=null;#o=null;#s=new Intl[(_0x42c143(0x134))]('en-US',{'hour':'numeric','minute':_0x42c143(0x103),'hour12':!0x0});constructor(_0x2dc36e){this.#e=document['querySelector'](_0x2dc36e),this.#e&&this['setupClockUpdates']();}['setupClockUpdates'](){const _0x21dfa8=_0x42c143;clearTimeout(this.#o),clearInterval(this.#t);const _0x25b746=new Date(),_0x14dc85=0x3e8*(0x3c-_0x25b746['getSeconds']())-_0x25b746['getMilliseconds']();this[_0x21dfa8(0x113)](),this.#o=setTimeout(()=>{this['updateClock'](),this.#t=setInterval(()=>this['updateClock'](),0xea60);},_0x14dc85);}['updateClock'](){const _0x780e94=_0x42c143;this.#e&&(this.#e['textContent']=this.#s[_0x780e94(0xee)](new Date()));}['destroy'](){clearTimeout(this.#o),clearInterval(this.#t);}}export default class Taskbar{constructor(_0xade2b3){const _0x2b50a2=_0x42c143;this['eventBus']=_0xade2b3,taskbarSharedEventBus=_0xade2b3,this[_0x2b50a2(0x120)]=document['getElementById']('start-button'),this[_0x2b50a2(0x10f)]=new _0x251a98(this['eventBus']),this['programsContainer']=document['querySelector'](_0x2b50a2(0x11d)),this['systemTray']=document['querySelector'](_0x2b50a2(0xf8)),this['taskbar']=document[_0x2b50a2(0xde)]('.taskbar'),this[_0x2b50a2(0xfb)](),window[_0x2b50a2(0x127)]('resize',()=>this[_0x2b50a2(0xfb)]()),this[_0x2b50a2(0x138)](),this['setupResponsiveTaskbar'](),setupTooltips('.tray-status-icon,\x20.tray-network-icon,\x20.tray-volume-icon,\x20.tray-fullscreen-icon',void 0x0,0x64,()=>!document[_0x2b50a2(0x114)]('balloon-root')),new Clock(_0x2b50a2(0x112)),this[_0x2b50a2(0x11a)](),document[_0x2b50a2(0x127)](_0x2b50a2(0x118),()=>{});}['subscribeToEvents'](){const _0x612fe9=_0x42c143;this[_0x612fe9(0x11f)][_0x612fe9(0x122)](EVENTS[_0x612fe9(0x11b)],()=>{const _0x195c0d=_0x612fe9;this[_0x195c0d(0x120)][_0x195c0d(0x109)]['add']('active');}),this[_0x612fe9(0x11f)][_0x612fe9(0x122)](EVENTS['STARTMENU_CLOSED'],()=>{const _0x202560=_0x612fe9;this[_0x202560(0x120)][_0x202560(0x109)]['remove']('active');}),this['eventBus'][_0x612fe9(0x122)](EVENTS[_0x612fe9(0xe4)],()=>{this['updateTaskbarLayout']();}),this[_0x612fe9(0x11f)][_0x612fe9(0x122)](EVENTS['WINDOW_CLOSED'],()=>{this['updateTaskbarLayout']();}),this['eventBus']['subscribe'](EVENTS[_0x612fe9(0xf7)],_0x31aba7=>{setTimeout(()=>{const _0x3d5df7=_0x225a;if(_0x31aba7&&_0x3d5df7(0xfa)===_0x31aba7['programId']){const _0x3fd94a=document['querySelector'](_0x3d5df7(0x136));if(_0x3fd94a){const _0x28cb76=_0x3fd94a['querySelector']('span'),_0xbdcbb7=_0x3fd94a['querySelector'](_0x3d5df7(0xff));if(_0x28cb76&&_0xbdcbb7){const _0x262fea=_0xbdcbb7['alt'];_0x28cb76['querySelector'](_0x3d5df7(0x128))||(_0x28cb76['innerHTML']=_0x262fea+_0x3d5df7(0xe2));}}}},0xfa);}),this[_0x612fe9(0x11f)]['subscribe'](EVENTS[_0x612fe9(0x10e)],_0xc1281=>{setTimeout(()=>{const _0x41a9f2=_0x225a;if(_0xc1281&&'musicPlayer'===_0xc1281['programId']){const _0x2fd925=document[_0x41a9f2(0xde)]('.taskbar-item[data-program-id=\x22musicPlayer-window\x22]');if(_0x2fd925){const _0x1984f5=_0x2fd925['querySelector']('span'),_0x54c109=_0x2fd925[_0x41a9f2(0xde)](_0x41a9f2(0xff));if(_0x1984f5&&_0x54c109){const _0x16a862=_0x54c109['alt'];_0x1984f5['querySelector'](_0x41a9f2(0x128))&&(_0x1984f5['innerHTML']=_0x16a862);}}}},0xfa);});}[_0x42c143(0x138)](){const _0x41ae6e=_0x42c143;this[_0x41ae6e(0x120)][_0x41ae6e(0x127)](_0x41ae6e(0x12e),_0x35cb05=>{const _0xe7843e=_0x41ae6e;_0x35cb05[_0xe7843e(0x132)](),this[_0xe7843e(0x11f)]['publish'](EVENTS['STARTMENU_TOGGLE']);});}['setupResponsiveTaskbar'](){const _0x492ff5=_0x42c143;this[_0x492ff5(0x121)](),window[_0x492ff5(0x127)]('resize',()=>{const _0x40a4c2=_0x492ff5;this[_0x40a4c2(0x121)]();}),new MutationObserver(()=>{this['updateTaskbarLayout']();})[_0x492ff5(0x139)](this[_0x492ff5(0xf4)],{'childList':!0x0,'subtree':!0x1});}[_0x42c143(0x121)](){const _0x20a782=_0x42c143,_0x539d74=document[_0x20a782(0x12c)](_0x20a782(0xe0));if(0x0===_0x539d74['length'])return;const _0x5bfc7a=this[_0x20a782(0xfc)](),_0x957720=this[_0x20a782(0x104)](_0x539d74[_0x20a782(0x133)],_0x5bfc7a);this['_applyTaskbarLayout'](_0x539d74,_0x957720,_0x5bfc7a);}['_calculateAvailableWidth'](){const _0x4868b4=_0x42c143;return this['taskbar'][_0x4868b4(0x117)]-this['startButton'][_0x4868b4(0x117)]-this['systemTray'][_0x4868b4(0x117)];}['_determineLayoutMode'](_0x5a57c5,_0x57e498){const _0x53f9f0=_0x42c143;return 0xa8*_0x5a57c5<=_0x57e498?'default':0x50*_0x5a57c5<=_0x57e498?_0x53f9f0(0x12b):0x24*_0x5a57c5<=_0x57e498?_0x53f9f0(0x10b):_0x53f9f0(0xfd);}[_0x42c143(0xe6)](_0x47e341,_0x4edb45,_0x59aabd){const _0x4e6d92=_0x42c143,_0x2df0e9=_0x47e341[_0x4e6d92(0x133)];let _0x162e27=Math[_0x4e6d92(0x10c)](_0x59aabd/_0x2df0e9);_0x162e27>0xa8&&(_0x162e27=0xa8),_0x162e27<0x24&&(_0x162e27=0x24);const _0x563ac6=0x24===_0x162e27;_0x47e341[_0x4e6d92(0xfe)](_0x31c695=>{const _0x303ef0=_0x4e6d92;_0x31c695[_0x303ef0(0xed)][_0x303ef0(0xec)]='flex',_0x31c695[_0x303ef0(0xed)][_0x303ef0(0xf5)]=_0x162e27+'px',_0x31c695[_0x303ef0(0x109)][_0x303ef0(0xf0)](_0x303ef0(0x10b),_0x563ac6);});}['_setStartButtonImage'](){const _0x5bf225=_0x42c143,_0x31de98=this[_0x5bf225(0x120)][_0x5bf225(0xde)](_0x5bf225(0xff));_0x31de98&&(_0x31de98[_0x5bf225(0x137)]='assets/gui/taskbar/start-button.webp');}}let balloonTimeouts=[];function _0x225a(_0x8160ea,_0x429b14){const _0xd75763=_0xd757();return _0x225a=function(_0x225a76,_0x520767){_0x225a76=_0x225a76-0xde;let _0x19236c=_0xd75763[_0x225a76];if(_0x225a['LwLvWe']===undefined){var _0x4e843d=function(_0x251a98){const _0x2dc36e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x25b746='',_0x14dc85='';for(let _0xade2b3=0x0,_0x31aba7,_0x3fd94a,_0x28cb76=0x0;_0x3fd94a=_0x251a98['charAt'](_0x28cb76++);~_0x3fd94a&&(_0x31aba7=_0xade2b3%0x4?_0x31aba7*0x40+_0x3fd94a:_0x3fd94a,_0xade2b3++%0x4)?_0x25b746+=String['fromCharCode'](0xff&_0x31aba7>>(-0x2*_0xade2b3&0x6)):0x0){_0x3fd94a=_0x2dc36e['indexOf'](_0x3fd94a);}for(let _0xbdcbb7=0x0,_0x262fea=_0x25b746['length'];_0xbdcbb7<_0x262fea;_0xbdcbb7++){_0x14dc85+='%'+('00'+_0x25b746['charCodeAt'](_0xbdcbb7)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x14dc85);};_0x225a['aDzGYL']=_0x4e843d,_0x8160ea=arguments,_0x225a['LwLvWe']=!![];}const _0x4328f0=_0xd75763[0x0],_0x1e03de=_0x225a76+_0x4328f0,_0x1615cb=_0x8160ea[_0x1e03de];return!_0x1615cb?(_0x19236c=_0x225a['aDzGYL'](_0x19236c),_0x8160ea[_0x1e03de]=_0x19236c):_0x19236c=_0x1615cb,_0x19236c;},_0x225a(_0x8160ea,_0x429b14);}export function hideBalloon(_0x55bf37=!0x1){const _0x1809d3=_0x42c143,_0x278ec7=document[_0x1809d3(0x114)]('balloon-root');if(!_0x278ec7)return;const _0x3a7b39=_0x278ec7[_0x1809d3(0xde)]('.balloon');balloonTimeouts[_0x1809d3(0xfe)](_0x40cf6f=>clearTimeout(_0x40cf6f)),balloonTimeouts=[],_0x55bf37?_0x278ec7['parentNode']&&_0x278ec7[_0x1809d3(0x123)]['removeChild'](_0x278ec7):(_0x3a7b39&&_0x3a7b39['classList']['add']('hide'),setTimeout(()=>{const _0x4bc2bf=_0x1809d3;_0x278ec7[_0x4bc2bf(0x123)]&&_0x278ec7['parentNode']['removeChild'](_0x278ec7);},0x3e8));}export async function showNetworkBalloon(){const _0x159158=_0x42c143,_0x1e014c=document['getElementById']('login-screen');if(_0x1e014c&&'none'!==_0x1e014c[_0x159158(0xed)]['display']&&'0'!==_0x1e014c['style'][_0x159158(0x108)])return;if(document[_0x159158(0x114)](_0x159158(0x11c)))return;balloonTimeouts['forEach'](_0x14276a=>clearTimeout(_0x14276a)),balloonTimeouts=[],balloonSound&&(balloonSound[_0x159158(0x101)]=0x0,balloonSound['play']()['catch'](_0x5aa859=>console['error'](_0x159158(0xe1),_0x5aa859)));const _0x1c6e3f=document[_0x159158(0xde)](_0x159158(0x125));if(!_0x1c6e3f)return;const _0x17cac5=document['createElement']('div');_0x17cac5['id']='balloon-root',_0x17cac5['style']['position']='absolute',_0x17cac5[_0x159158(0xed)][_0x159158(0xe8)]='1400',document[_0x159158(0xe3)]['appendChild'](_0x17cac5);let _0x3e25dd='',_0xe1fb6='';try{const _0x5f5d39=await fetch('./system.json'),_0x526f6a=await _0x5f5d39['json']();_0x526f6a['balloon']&&(_0x526f6a[_0x159158(0x10a)][_0x159158(0x12d)]&&(_0x3e25dd=_0x526f6a['balloon']['title']),_0x526f6a['balloon']['body']&&(_0xe1fb6=_0x526f6a['balloon']['body']));}catch(_0x4f57eb){console[_0x159158(0x131)](_0x159158(0x124),_0x4f57eb);}_0x17cac5['innerHTML']='\x0a\x20\x20\x20\x20<div\x20class=\x22balloon\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22balloon__close\x22\x20aria-label=\x22Close\x22></button>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22balloon__header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20class=\x22balloon__header__img\x22\x20src=\x22assets/gui/taskbar/welcome.webp\x22\x20alt=\x22welcome\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22balloon__header__text\x22>'+_0x3e25dd+'</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22balloon__text__first\x22\x20style=\x22padding:\x200\x208px\x200\x202px;\x22>'+_0xe1fb6+'</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22balloon__text__second\x22\x20style=\x22padding:\x200\x208px\x200\x202px;\x20margin-top:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20Get\x20Started:\x20<a\x20href=\x22#\x22\x20id=\x22balloon-about-link\x22\x20style=\x22color:\x20blue;\x20text-decoration:\x20underline;\x22>About\x20Me</a>\x20|\x20<a\x20href=\x22#\x22\x20id=\x22balloon-projects-link\x22\x20style=\x22color:\x20blue;\x20text-decoration:\x20underline;\x22>My\x20Projects</a>\x0a\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22balloon-pointer-anchor\x22\x20style=\x22position:absolute;bottom:-19px;right:24px;width:0;height:0;\x22></div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20';const _0x5ef22f=_0x17cac5[_0x159158(0xde)](_0x159158(0x11e));_0x5ef22f&&_0x5ef22f['addEventListener'](_0x159158(0x12e),_0x5c3e22=>{const _0x52c5b1=_0x159158;_0x5c3e22['preventDefault'](),taskbarSharedEventBus&&EVENTS?taskbarSharedEventBus[_0x52c5b1(0xe9)](EVENTS['PROGRAM_OPEN'],{'programName':'projects'}):console[_0x52c5b1(0x131)](_0x52c5b1(0xe5));});const _0x18238f=_0x17cac5[_0x159158(0xde)]('#balloon-about-link');_0x18238f&&_0x18238f[_0x159158(0x127)](_0x159158(0x12e),_0x28fd10=>{const _0x59e2c6=_0x159158;_0x28fd10['preventDefault'](),taskbarSharedEventBus&&EVENTS?taskbarSharedEventBus['publish'](EVENTS[_0x59e2c6(0x102)],{'programName':_0x59e2c6(0x126)}):console[_0x59e2c6(0x131)]('taskbarSharedEventBus\x20or\x20EVENTS\x20not\x20available\x20for\x20balloon\x20link\x20(About\x20Me).');}),setTimeout(()=>{const _0x46939c=_0x159158,_0xf15435=_0x1c6e3f['getBoundingClientRect'](),_0x307b8b=_0x17cac5['querySelector']('.balloon'),_0x28f67b=_0x307b8b[_0x46939c(0xde)]('.balloon-pointer-anchor');requestAnimationFrame(()=>{const _0x5f7e01=_0x46939c,_0x5d2855=_0x28f67b['getBoundingClientRect'](),_0x2ff998=_0xf15435[_0x5f7e01(0x12f)]+_0xf15435['width']/0x2+window['scrollX']-(_0x5d2855[_0x5f7e01(0x12f)]+_0x5d2855[_0x5f7e01(0xf5)]/0x2+window[_0x5f7e01(0x129)])-0x8;_0x17cac5['style']['left']=_0x17cac5['offsetLeft']+_0x2ff998+'px',_0x17cac5['style'][_0x5f7e01(0xea)]=_0xf15435[_0x5f7e01(0xea)]-_0x307b8b['offsetHeight']-0x8-0xc+window[_0x5f7e01(0x110)]+'px';});},0x0);const _0x2aa6eb=_0x17cac5['querySelector'](_0x159158(0xe7));_0x17cac5[_0x159158(0xde)](_0x159158(0x12a))[_0x159158(0x130)]=()=>hideBalloon(),_0x2aa6eb['classList']['remove'](_0x159158(0xf2));const _0x5945b2=isMobileDevice(),_0x5ac74a=_0x5945b2?0x1b58:0x2710,_0xe7ac7=_0x5945b2?0x1f40:0x2af8;balloonTimeouts['push'](setTimeout(()=>_0x2aa6eb[_0x159158(0x109)][_0x159158(0x13a)]('hide'),_0x5ac74a)),balloonTimeouts['push'](setTimeout(()=>hideBalloon(),_0xe7ac7));}const setupBalloonClick=()=>{const _0x14c64c=_0x42c143,_0x4a37ce=document[_0x14c64c(0xde)](_0x14c64c(0x125));_0x4a37ce&&_0x4a37ce['addEventListener'](_0x14c64c(0x12e),showNetworkBalloon);};window['addEventListener'](_0x42c143(0x135),()=>{const _0x5e983a=_0x42c143;setupBalloonClick();const _0x3602e6=document[_0x5e983a(0xde)](_0x5e983a(0xf3));_0x3602e6&&_0x3602e6[_0x5e983a(0x127)]('click',()=>{const _0x471543=_0x5e983a;hideBalloon(!0x0);const _0x2c248c=document['documentElement'];document['fullscreenElement']?document['exitFullscreen']():_0x2c248c[_0x471543(0x116)]?_0x2c248c['requestFullscreen']():_0x2c248c[_0x471543(0x105)]?_0x2c248c[_0x471543(0x105)]():_0x2c248c[_0x471543(0xdf)]?_0x2c248c['webkitRequestFullscreen']():_0x2c248c[_0x471543(0xef)]?_0x2c248c['msRequestFullscreen']():alert('Press\x20F11\x20to\x20enter\x20fullscreen\x20mode.');});});