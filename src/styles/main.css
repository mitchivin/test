/*
 * main.css â€” Main Stylesheet for Windows XP Simulation
 *
 * Styles for:
 * - Imports all core and utility stylesheets
 * - Z-index hierarchy, global overrides, window states, iframe apps, and scrollbars
 *
 * @file src/styles/main.css
 */

/* ==================================================
   Main Stylesheet for Windows XP Simulation
   ==================================================
   - Imports all core and utility stylesheets.
   - Defines z-index hierarchy and global overrides.
   ================================================== */

/* ===== Imports ===== */
@import url("fonts.css");
@import url("reset.css");
@import url("gui/desktop.css");
@import url("gui/taskbar.css");
@import url("gui/startMenu.css");
@import url("gui/window.css");
@import url("gui/windowBars.css");
@import url("gui/boot.css");
@import url("utils/crtEffect.css");

/* ===== Z-Index Hierarchy ===== */
/* (Moved to reset.css) */

/* ===== Window States & Maximized Styles ===== */
.window.maximized {
  position: absolute;
  border-radius: 0;
  border-width: 0;
  overflow: hidden;
  border-color: transparent !important;
  box-shadow: none !important;
  max-width: none !important;
  min-width: 0 !important;
  max-height: none !important;
  min-height: 0 !important;
}

.window.maximized .title-bar {
  border-radius: 0;
}

/* Prevent internal scrollbars when maximized */
.window.maximized .window-body {
  overflow: hidden !important;
}

/* Add styles here to override or supplement xp.css */

/* ===== Global Layout & Body Styles ===== */

html,
body {
  overscroll-behavior: none; /* Prevents pull-to-refresh and overscroll bounce */
  touch-action: none; /* Prevents pinch-zoom and other default touch actions */
  overflow: hidden;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}

/* ==================================================
   END Main Stylesheet
   ================================================== */

/* ==================================================
   Iframe App Styles for Windows XP Simulation
   ==================================================
   - Handles iframe-based app containers, overlays, and layout fixes.
   - Ensures consistent rendering across app windows.
   ================================================== */

/* ===== Iframe App Styles ===== */

/* ===== 1. Window Body & Links ===== */
/**
 * Common styles for iframe-based applications
 * Ensures consistent rendering across different application windows
 */

/* Common settings for all application containers */
.window-body a {
  color: #0088e4;
}

/* Ensure main container fills the window body */
.window-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: auto; /* Allow window body to scroll if iframe content is too tall */
}

/* Common styles for all iframe containers */
.iframe-container {
  /* This class is added in windowManager.js when using preloaded iframes */
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
}

/* Base styles for iframe containers */
/* Applies to iframes directly within .window-body or .iframe-container */
.window-body > iframe,
.iframe-container > iframe {
  width: 100%;
  height: 100%;
  border: none;
  margin: 0;
  padding: 0;
  display: block;
}

/* Style for iframe overlay used during window drag operations */
.iframe-overlay {
  position: absolute;
  inset: 0;
  background-color: transparent;
  z-index: 1;
  display: none;
}

/* Prevent iframe scroll from affecting parent */
iframe {
  overflow: hidden;
}

/* Make sure iframe links don't cause layout shifts */
iframe a {
  scroll-behavior: auto;
}

/* Fixed positioning for desktop to prevent shifting */
.desktop {
  position: fixed !important;
  inset: 0 !important;
  overflow: hidden !important;
}

/* ==================================================
   END Iframe App Styles
   ================================================== */

/* ==================================================
   Global Mobile Styles (max-width: 768px)
   ================================================== */
@media (max-width: 768px) {
  /* From src/styles/gui/window.css - Window sizing on mobile */
  .app-window,
  .window-body.iframe-container {
    max-height: calc(var(--real-vh, 1vh) * 100 - var(--taskbar-height, 30px));
  }
  .app-window .window-body {
    flex: 1 1 auto;
    min-height: 0;
  }
  .app-window.maximized,
  .window.maximized {
    /* These !important height rules override desktop .window.maximized */
    height: calc(
      var(--real-vh, 1vh) * 100 - var(--taskbar-height, 30px)
    ) !important;
    max-height: calc(
      var(--real-vh, 1vh) * 100 - var(--taskbar-height, 30px)
    ) !important;
  }

  /* From src/styles/gui/taskbar.css - Utility class */
  .desktop-only {
    display: none !important;
  }
}
/* ==================================================
   END Global Mobile Styles
   ================================================== */

/* ==================================================
   XP.css-Inspired Custom Scrollbar Styles (Global)
   ==================================================
   - Ensures all scrollable areas (windows, menus, lists) use a consistent Windows XP look.
   - Applies to .window-body, .all-programs-items, .recently-used-items, .menu-items, and any scrollable container.
   - Uses both ::-webkit-scrollbar (WebKit) and scrollbar-color/width (Firefox) for cross-browser support.
   - Colors and sizing match XP.css and Windows XP visual style.
   ================================================== */

/* Why: This ensures a professional, immersive, and consistent XP look for all scrollable UI elements, regardless of browser. */

/* WebKit browsers (Chrome, Edge, Safari) */
.window-body,
.recently-used-items,
.menu-items {
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: #316ac5 #ece9d8; /* thumb, track */
}

.window-body::-webkit-scrollbar,
.recently-used-items::-webkit-scrollbar,
.menu-items::-webkit-scrollbar {
  width: 13px;
  background: #ece9d8;
}

.window-body::-webkit-scrollbar-thumb,
.recently-used-items::-webkit-scrollbar-thumb,
.menu-items::-webkit-scrollbar-thumb {
  background: linear-gradient(to bottom, #eaf1fb 0%, #316ac5 100%);
  border-radius: 7px;
  border: 2px solid #ece9d8;
  min-height: 40px;
  box-shadow: 0 1px 2px rgb(0 0 0 / 10%);
}

.window-body::-webkit-scrollbar-thumb:hover,
.recently-used-items::-webkit-scrollbar-thumb:hover,
.menu-items::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(to bottom, #dbe8fa 0%, #184f8b 100%);
}

.window-body::-webkit-scrollbar-track,
.recently-used-items::-webkit-scrollbar-track,
.menu-items::-webkit-scrollbar-track {
  background: #ece9d8;
  border-radius: 7px;
}

/* Hide scrollbar corner (where vertical and horizontal meet) */
.window-body::-webkit-scrollbar-corner,
.recently-used-items::-webkit-scrollbar-corner,
.menu-items::-webkit-scrollbar-corner {
  background: #ece9d8;
}

/* Accessibility: Ensure thumb is always visible and has good contrast */
@media (forced-colors: active) {
  .window-body,
  .recently-used-items,
  .menu-items {
    scrollbar-color: ButtonText ButtonFace;
  }
}

/* ==================================================
   END XP.css-Inspired Custom Scrollbar Styles
   ================================================== */

/* ===== Root & Base Element Styles ===== */

/* Prevent text selection across the UI, allow for inputs/textareas */
.disabled,
[disabled] {
  cursor: default !important;
  user-select: none !important; /* Standard */
  -webkit-user-select: none; /* Safari */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* IE/Edge */
}

.overflow-y-auto-x-hidden {
  overflow-y: auto;
  overflow-x: hidden;
}

/* Style for dynamic tooltips created by tooltip.js */
.dynamic-tooltip-style {
  position: absolute;
  display: none;
  z-index: 10000;
  background-color: #ffffe1; /* XP tooltip yellow */
  border: 1px solid #000000; /* Standard black border */
  padding: 2px 5px;
  font-size: 8pt; /* XP standard tooltip font size */
  white-space: nowrap;
  font-family: Tahoma, sans-serif; /* Standard XP font */
  pointer-events: none; /* Tooltip should not be interactive */
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}

/* Global box-sizing and font smoothing */
*,
*::before,
*::after {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Add styles here to override or supplement xp.css */

/* --- Prevent Unwanted Dragging and Selection on UI Elements --- */

/* Apply to the elements themselves */
.toolbar-button,
.menu-item, /* Start Menu general items */
.footer-button, /* Start Menu footer buttons */
.all-programs-item, /* Start Menu All Programs popout items */
.recently-used-item, /* Start Menu Recently Used popout items */
.all-programs-button, /* Start Menu "All Programs" button itself */
.desktop-icon, /* Desktop icons */
.app-window .title-bar-controls button, /* Window Min/Max/Close buttons */
.logoff-dialog-button, /* Log Off Dialog buttons */
.left-panel__card__header, /* About Me - card headers (to prevent dragging the header img) */
.left-panel__card__row, /* About Me - rows in left panel (to prevent dragging the row img) */
.about-paragraph-row, /* About Me - paragraph rows (parent of icon and text) */
.about-paragraph-icon-col /* About Me - icon column in paragraph rows */
/* Note: .about-paragraph-icon is an img itself, handled below */ {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -webkit-user-drag: none;
}

/* Apply to direct image children of these elements */
.toolbar-button > img,
.menu-item > img,
.menu-item .item-content > img, /* Handles nested img in some menu items */
.footer-button > img,
.all-programs-item > img,
.recently-used-item > img,
.all-programs-button > img, /* For the arrow in "All Programs" button */
.desktop-icon img, /* Desktop icons often have a wrapper then the img */
.about-paragraph-icon, /* About Me - paragraph icons */
.left-panel__card__img, /* About Me - left panel card content icons */
.left-panel__card__header__img /* About Me - left panel card header icons */
/* Note: .app-window .title-bar-controls button typically uses background-image, not child img */ {
  pointer-events: none;
}

/* ===== Global Layout & Body Styles ===== */

/* ==================================================
   END Main Stylesheet
   ================================================== */
